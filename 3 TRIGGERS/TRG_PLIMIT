CREATE OR REPLACE TRIGGER TRG_PLIMIT 
BEFORE UPDATE OR INSERT ON ASSIGNED_PROJECTS
FOR EACH ROW
DECLARE
EMPCOUNT INTEGER;
REQUESTED_EID INTEGER;
BEGIN
REQUESTED_EID := :new.EID;
SELECT COUNT(*) INTO EMPCOUNT
FROM ASSIGNED_PROJECTS
WHERE EID = REQUESTED_EID;
IF EMPCOUNT > 1 THEN
RAISE_APPLICATION_ERROR (-20000,'Employees are limited to a max of two projects.');
END IF;
END;
